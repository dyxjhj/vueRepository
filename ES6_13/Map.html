<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // set集合
        // 创建set 通过构造函数
        const set = new Set()
        console.log(set)
        // 添加元素 
        set.add(10)
        set.add(11)
        set.add(12)
        set.add(10)

        // obj1和obj2是两个不同的对象
        const obj1 = {}
        const obj2 = {}
        set.add(obj1)
        set.add(obj2)

        // 应用场景：set可以用于数组去重
        const names = ["zhang","zhao","tian","sun","li","zhang"]
        const namesSet = new Set(names)
        // set转回数组
        const newNames = Array.from(namesSet)
        console.log(newNames)

        // set的方法
        // size属性
        console.log(set.size)
        // add(value)方法 返回set对象本身
        // delete(value)方法 返回boolean类型
        // has(value)方法 判断set中是否存在和value相等的元素 返回boolean类型
        // clear(value)方法 清空set中所有元素 没有返回值
        // forEach(callback,[,thisArg])方法 遍历set 
        set.forEach(item => {
            console.log(item)
        })
        // set是一个可迭代对象 支持for...of遍历
        for(const item of set) {
            console.log(item)
        }
 
        // Weak Reference 弱引用
        // Strong Reference 强引用
        // WeakSet 
        // 只能存放对象数据类型，不能存放基本数据类型
        // 对对象的引用都是弱引用  所以WeakSet不能进行遍历 所以WeakSet中的对象没有办法获取到
        // WeakSet的应用
        const pWeakSet = new WeakSet()
        class Person {
            running() {
                if(!pWeakSet.has(this)) {
                    console.log("error")
                    return 
                }
                console.log("running")
            }
        }
        const p = new Person()
        p.running() //报错
        const myFun = p.running
        myFun() //报错
        const obj = { run: myFun}
        obj.run()


        // Map映射
        // 创建Map 用于存储映射关系 
        // 对象中存储映射关系只能使用字符串作为属性名（key）
        // 通过其它类型作为key，比如对象，这个时候会自动将对象转成字符串来作为key
        const obj3 = { name: "zhang" }
        const obj4 = {
            [obj3] : "hahaha"
        }

        const obj5 = { name: "zhang" }
        const obj6 = { name: "li" }

        // 创建Map
        const map = new Map()
        map.set(obj5, "hahaha")
        map.set(obj6, "hehehe")

        console.log(map)

        // map属性与方法
        console.log(map.size)
        // set方法 设置新内容
        // get方法 获取内容
        // delete方法
        // has方法
        // clear方法
        // forEach方法
        map.forEach(item => {
            // 拿到的是value
            console.log(item)
        })
        // map支持for of方法
        for(const item of map) {
            console.log(item)
        }
        for(const item of map) {
            const [key, value] = item
            console.log(key, value)
        }

        // WeakMap的使用
        // WeakMap的key只能是对象
        const weakMap = new WeakMap()
        weakMap.set(obj5, "weak1")
        weakMap.set(obj6, "weak2")
        // WeakMap不能遍历


    </script>
</body>
</html>