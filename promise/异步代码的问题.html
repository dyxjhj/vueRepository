<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        // 异步代码的问题
        // function execCode(counter, callback) {
        //     setTimeout(() => {
        //         console.log("hello world")
        //         let count = 0
        //         for(let i = 0; i < 100; i++) {
        //             count += i
        //         }
        //         callback(count)
        //     }, 3000)
            
        // }
        function execCode(counter, successCallback, failureCallback) {
            // 异步任务
            setTimeout(() => {
                console.log("hello world")
                // 特殊情况 
                if(counter <= 0) {
                    failureCallback("counter有问题")
                } else {
                    let count = 0
                    for(let i = 0; i < 100; i++) {
                        count += i
                    }
                    successCallback(count)
                }
            }, 3000)

            
        }
        // 并不是立即执行 里面有延时器
        // 和网络请求同理
        // 如何知道执行完了
        // 传入一个回调函数
        // 代码逻辑走完之后调用这个回调函数
        // execCode((value) => {
        //     console.log("执行完了", value)
        // })

        execCode(-1, (value) => {
            console.log("执行完了", value)
        }, (err) => {
            console.log("执行失败", err)
        })



        
    </script>
</body>
</html>